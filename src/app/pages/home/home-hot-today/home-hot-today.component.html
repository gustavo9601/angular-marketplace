<div class="ps-deal-hot" *ngIf="!preload">

  <div class="container">

    <div class="row">

      <!--=====================================
Column Deal Hot
======================================-->

      <div class="col-xl-9 col-12 ">

        <div class="ps-block--deal-hot" data-mh="dealhot">

          <div class="ps-block__header">

            <h3>Deal hot today</h3>

            <div class="ps-block__navigation">
              <a class="ps-carousel__prev" href=".ps-carousel--deal-hot">
                <i class="icon-chevron-left"></i>
              </a>
              <a class="ps-carousel__next" href=".ps-carousel--deal-hot">
                <i class="icon-chevron-right"></i>
              </a>
            </div>

          </div>

          <div class="ps-product__content">

            <div
              *ngIf="productsAvailableStockPromotion.length > 0"
              class="ps-carousel--deal-hot ps-carousel--deal-hot owl-slider-promotion" data-owl-auto="true" data-owl-loop="true"
              data-owl-speed="5000" data-owl-gap="0" data-owl-nav="false" data-owl-dots="false" data-owl-item="1"
              data-owl-item-xs="1" data-owl-item-sm="1" data-owl-item-md="1" data-owl-item-lg="1"
              data-owl-duration="1000" data-owl-mousedrag="on">

              <!--=====================================
              Product Deal Home
              ======================================-->

              <div
                *ngFor="let product of productsAvailableStockPromotion;let index = index; let isLastIndex = last"
                [appOwlCarousel]="isLastIndex"  classOwlCarousel="owl-slider-promotion"
                [appSlick]="isLastIndex" classSlick="ps-product--detail"
                [appLightBox]="isLastIndex" classLightBox="ps-product--detail"
                [appCountDown]="isLastIndex" classCountDown="ps-countdown"
                [appRating]="isLastIndex" classRating="ps-rating"
                [appProgressBar]="isLastIndex" classProgressBar="ps-progress"
                class="ps-product--detail ps-product--hot-deal">

                <div class="ps-product__header">

                  <div class="ps-product__thumbnail"
                       [attr.galley]="product.gallery"
                       data-vertical="true">
                    <figure>

                      <div class="ps-wrapper">

                        <div class="ps-product__gallery" data-arrow="true">

                          <div class="item" *ngFor="let image of product.gallery;let last = last">
                            <a href="{{_configService.path}}img/products/{{product.category}}/gallery/{{image}}">
                              <img src="{{_configService.path}}img/products/{{product.category}}/gallery/{{image}}"
                                   alt="">
                            </a>
                          </div>

                        </div>

                        <div class="ps-product__badge">
                          <span>Save <br> ${{((product.offer[0] === 'Disccount') ? (product.price * product.offer[1]) / 100 : product.offer[1] - product.price) | number :'2.2'}}</span>
                        </div>

                      </div>

                    </figure>

                    <div class="ps-product__variants" data-item="4" data-md="3" data-sm="3" data-arrow="true">

                      <div class="item" *ngFor="let image of product.gallery">
                        <img src="{{_configService.path}}img/products/{{product.category}}/gallery/{{image}}" alt="">
                      </div>

                    </div>

                  </div>

                  <div class="ps-product__info">

                    <h5>{{product.category}}</h5>

                    <h3 class="ps-product__name">{{product.name}}</h3>

                    <div class="ps-product__meta">

                      <h4 class="ps-product__price sale">
                        ${{ ((product.offer[0] === 'Disccount') ? product.price - ((product.price * product.offer[1]) / 100) : product.price - product.offer[1]) | number :'2.2'}}
                        <del> ${{product.price}}</del>
                      </h4>

                      <div class="ps-product__rating">

                        <select class="ps-rating" data-read-only="true">


                          <option *ngFor="let value of [1,2,3,4,5]"
                                  [value]="(product.calculate_review >= value) ? 1 : 2">{{value}}</option>

                          <!-- <option value="1">1</option>
                           <option value="1">2</option>
                           <option value="1">3</option>
                           <option value="1">4</option>
                           <option value="2">5</option>-->

                        </select>
                        <span>({{product.reviews.length}} review)</span>

                      </div>

                      <div class="ps-product__specification">

                        <p>Status:
                          <strong class="in-stock" *ngIf="product.stock > 0"> In Stock</strong>
                          <strong class="out-stock" *ngIf="product.stock === 0"> Out Stock</strong>
                        </p>

                      </div>

                    </div>

                    <div class="ps-product__expires">

                      <p>Expires In</p>

                      <ul class="ps-countdown" [attr.data-time]="product.offer[2]">

                        <li><span class="days"></span>
                          <p>Days</p>
                        </li>

                        <li><span class="hours"></span>
                          <p>Hours</p>
                        </li>

                        <li><span class="minutes"></span>
                          <p>Minutes</p>
                        </li>

                        <li><span class="seconds"></span>
                          <p>Seconds</p>
                        </li>

                      </ul>

                    </div>

                    <div class="ps-product__processs-bar">

                      <div class="ps-progress" [attr.data-value]="product.stock">
                        <span class="ps-progress__value"></span>
                      </div>

                      <p><strong>{{100 - product.stock}}/100</strong> Sold</p>

                    </div>

                  </div>

                </div>

              <!--  {{isLastIndex ? callback() : ''}}-->

              </div><!-- End Product Deal Hot -->

            </div><!-- End carousel Deal Hot -->

          </div><!-- End product content Deal Hot -->

        </div><!-- End deal hot -->

      </div><!-- End Columns -->

      <!--=====================================
      Column Top 20 Best Seller
      ======================================-->
      <div class="col-xl-3 col-12">

        <aside class="widget widget_best-sale" data-mh="dealhot">

          <h3 class="widget-title">Top 20 Best Seller</h3>

          <div class="widget__content">


            <app-preload *ngIf="productsBestSeller.length === 0"></app-preload>

            <div class="owl-slider-best-seller" data-owl-auto="true" data-owl-loop="true" data-owl-speed="5000" data-owl-gap="0"
                 data-owl-nav="false" data-owl-dots="false" data-owl-item="1" data-owl-item-xs="1" data-owl-item-sm="1"
                 data-owl-item-md="1" data-owl-item-lg="1" data-owl-duration="1000" data-owl-mousedrag="on"
                 *ngIf="productsBestSeller.length > 0">

              <div class="ps-product-group"
                   [appOwlCarousel]="lastIndexGroupProductBestSeller"  classOwlCarousel="owl-slider-best-seller"
                   [appRating]="lastIndexGroupProductBestSeller" classRating="ps-rating"
                   *ngFor="let groupProductsBestSeller of productsBestSeller;let lastIndexGroupProductBestSeller = last">

                <!--=====================================
                 Product
                 ======================================-->

                <div class="ps-product--horizontal"
                     *ngFor="let productBestSeller of groupProductsBestSeller">

                  <div class="ps-product__thumbnail">
                    <a [routerLink]="['product', productBestSeller.url]">
                      <img
                        src="{{_configService.path}}img/products/{{productBestSeller.category}}/{{productBestSeller.image}}"
                        alt="">
                    </a>
                  </div>

                  <div class="ps-product__content">

                    <a class="ps-product__title"
                       [routerLink]="['product', productBestSeller.url]">{{productBestSeller.name}}</a>

                    <p class="ps-product__price sale">
                      ${{ ((productBestSeller.offer[0] === 'Disccount') ? productBestSeller.price - ((productBestSeller.price * productBestSeller.offer[1]) / 100) : productBestSeller.price - productBestSeller.offer[1]) | number :'2.2'}}
                      <del> ${{productBestSeller.price}}</del>

                    </p>

                  </div>

                </div><!-- End Product -->


                <!--{{lastIndexGroupProductBestSeller ? callbackTopBestSeller() : ''}}-->

              </div><!-- End Product Group -->


            </div>

          </div>

        </aside><!-- End Aside -->

      </div><!-- End Columns -->

    </div>

  </div>

</div><!-- End Home Deal Hot -->


<app-preload *ngIf="preload"></app-preload>
